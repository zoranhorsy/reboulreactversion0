{
  "version": 3,
  "sources": ["../../src/workers/cartWorker.ts"],
  "sourcesContent": ["// Types\ntype CartItem = {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n  image: string;\n  variant: {\n    size: string;\n    color: string;\n    colorLabel: string;\n    stock: number;\n  };\n};\n\ntype CartOptions = {\n  shippingMethod?: 'standard' | 'express' | 'pickup';\n  discountCode?: string;\n};\n\ntype CartTotal = {\n  subtotal: number;\n  shipping: number;\n  discount: number;\n  total: number;\n  itemCount: number;\n};\n\ntype CartMessage = {\n  type: 'CALCULATE_TOTAL';\n  items: CartItem[];\n  options: CartOptions;\n};\n\n// Fonctions de calcul\nfunction calculateSubtotal(items: CartItem[]): number {\n  return items.reduce((total, item) => total + (item.price * item.quantity), 0);\n}\n\nfunction calculateItemCount(items: CartItem[]): number {\n  return items.reduce((total, item) => total + item.quantity, 0);\n}\n\nfunction calculateShipping(subtotal: number, method?: string): number {\n  switch (method) {\n    case 'express':\n      return subtotal > 100 ? 0 : 15;\n    case 'pickup':\n      return 0;\n    case 'standard':\n    default:\n      return subtotal > 50 ? 0 : 8;\n  }\n}\n\nfunction calculateDiscount(subtotal: number, code?: string): number {\n  if (!code) return 0;\n  \n  // Codes promo disponibles\n  switch (code.toUpperCase()) {\n    case 'WELCOME10':\n      return subtotal * 0.1;\n    case 'SUMMER20':\n      return subtotal * 0.2;\n    case 'REBOUL25':\n      return subtotal * 0.25;\n    case 'FREE50':\n      return subtotal >= 50 ? 8 : 0; // Livraison gratuite au-dessus de 50\u20AC\n    default:\n      return 0;\n  }\n}\n\nfunction calculateTotal(items: CartItem[], options: CartOptions): CartTotal {\n  const subtotal = calculateSubtotal(items);\n  const itemCount = calculateItemCount(items);\n  const shipping = calculateShipping(subtotal, options.shippingMethod);\n  const discount = calculateDiscount(subtotal, options.discountCode);\n  \n  return {\n    subtotal,\n    shipping,\n    discount,\n    total: subtotal + shipping - discount,\n    itemCount\n  };\n}\n\n// Gestionnaire de messages\nself.onmessage = (event: MessageEvent) => {\n  const message = event.data;\n\n  try {\n    if (message.type === 'CALCULATE_TOTAL') {\n      const result = calculateTotal(message.items, message.options);\n      self.postMessage({ type: 'CALCULATE_SUCCESS', result });\n    } else {\n      self.postMessage({ type: 'ERROR', error: 'Type de message non support\u00E9' });\n    }\n  } catch (error) {\n    self.postMessage({ type: 'ERROR', error: error instanceof Error ? error.message : 'Erreur inconnue' });\n  }\n}; "],
  "mappings": "iFAAA,IAAAA,EAAAC,EAAA,KAmCA,SAASC,EAAkBC,EAA2B,CACpD,OAAOA,EAAM,OAAO,CAACC,EAAOC,IAASD,EAASC,EAAK,MAAQA,EAAK,SAAW,CAAC,CAC9E,CAEA,SAASC,EAAmBH,EAA2B,CACrD,OAAOA,EAAM,OAAO,CAACC,EAAOC,IAASD,EAAQC,EAAK,SAAU,CAAC,CAC/D,CAEA,SAASE,EAAkBC,EAAkBC,EAAyB,CACpE,OAAQA,EAAQ,CACd,IAAK,UACH,OAAOD,EAAW,IAAM,EAAI,GAC9B,IAAK,SACH,MAAO,GACT,IAAK,WACL,QACE,OAAOA,EAAW,GAAK,EAAI,CAC/B,CACF,CAEA,SAASE,EAAkBF,EAAkBG,EAAuB,CAClE,GAAI,CAACA,EAAM,MAAO,GAGlB,OAAQA,EAAK,YAAY,EAAG,CAC1B,IAAK,YACH,OAAOH,EAAW,GACpB,IAAK,WACH,OAAOA,EAAW,GACpB,IAAK,WACH,OAAOA,EAAW,IACpB,IAAK,SACH,OAAOA,GAAY,GAAK,EAAI,EAC9B,QACE,MAAO,EACX,CACF,CAEA,SAASI,EAAeT,EAAmBU,EAAiC,CAC1E,IAAML,EAAWN,EAAkBC,CAAK,EAClCW,EAAYR,EAAmBH,CAAK,EACpCY,EAAWR,EAAkBC,EAAUK,EAAQ,cAAc,EAC7DG,EAAWN,EAAkBF,EAAUK,EAAQ,YAAY,EAEjE,MAAO,CACL,SAAAL,EACA,SAAAO,EACA,SAAAC,EACA,MAAOR,EAAWO,EAAWC,EAC7B,UAAAF,CACF,CACF,CAGA,KAAK,UAAaG,GAAwB,CACxC,IAAMC,EAAUD,EAAM,KAEtB,GAAI,CACF,GAAIC,EAAQ,OAAS,kBAAmB,CACtC,IAAMC,EAASP,EAAeM,EAAQ,MAAOA,EAAQ,OAAO,EAC5D,KAAK,YAAY,CAAE,KAAM,oBAAqB,OAAAC,CAAO,CAAC,CACxD,MACE,KAAK,YAAY,CAAE,KAAM,QAAS,MAAO,iCAA+B,CAAC,CAE7E,OAASC,EAAO,CACd,KAAK,YAAY,CAAE,KAAM,QAAS,MAAOA,aAAiB,MAAQA,EAAM,QAAU,iBAAkB,CAAC,CACvG,CACF",
  "names": ["require_cartWorker", "__commonJSMin", "calculateSubtotal", "items", "total", "item", "calculateItemCount", "calculateShipping", "subtotal", "method", "calculateDiscount", "code", "calculateTotal", "options", "itemCount", "shipping", "discount", "event", "message", "result", "error"]
}
